/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ */

/* –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
:root {
    --mobile-vh: 1vh;
    --safe-area-top: env(safe-area-inset-top);
    --safe-area-bottom: env(safe-area-inset-bottom);
    --safe-area-left: env(safe-area-inset-left);
    --safe-area-right: env(safe-area-inset-right);
}

/* –ë–∞–∑–æ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (max-width: 768px) {
    /* –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ */
    body {
        font-size: 16px;
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        text-rendering: optimizeSpeed;
    }
    
    /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ */
    * {
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        -webkit-perspective: 1000;
        perspective: 1000;
    }
    
    /* –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ */
    .container {
        overflow-x: hidden;
        position: relative;
    }
    
    /* Sticky —ç–ª–µ–º–µ–Ω—Ç—ã —Å safe area */
    header {
        top: var(--safe-area-top);
        padding-top: calc(12px + var(--safe-area-top));
    }
    
    /* Floating —ç–ª–µ–º–µ–Ω—Ç—ã —Å safe area */
    .cart-notification,
    .notification {
        bottom: calc(24px + var(--safe-area-bottom));
        left: calc(16px + var(--safe-area-left));
        right: calc(16px + var(--safe-area-right));
    }
    
    /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ touch –æ–±–ª–∞—Å—Ç–∏ */
    .category-card,
    .course-card {
        cursor: pointer;
        -webkit-tap-highlight-color: rgba(175, 242, 25, 0.1);
        tap-highlight-color: rgba(175, 242, 25, 0.1);
    }
    
    /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
    img {
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
        max-width: 100%;
        height: auto;
    }
    
    /* Keyboard handling */
    .search-bar input {
        font-size: 16px; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç zoom –Ω–∞ iOS */
        border-radius: 0; /* –£–±–∏—Ä–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏ iOS */
        -webkit-appearance: none;
        appearance: none;
    }
    
    /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è touch */
    @media (hover: none) and (pointer: coarse) {
        .category-card,
        .course-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .category-card:active,
        .course-card:active {
            transform: scale(0.98);
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.2),
                0 0 0 1px rgba(175, 242, 25, 0.2);
        }
    }
}

/* –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–µ —ç–∫—Ä–∞–Ω—ã (iPhone SE, —Å—Ç–∞—Ä—ã–µ Android) */
@media (max-width: 360px) {
    /* –£–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã */
    .container {
        padding: 0 8px;
    }
    
    /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π header */
    .header-content {
        padding: 8px 0;
        min-height: 56px;
    }
    
    .logo h1 {
        font-size: 16px;
    }
    
    /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    .category-card {
        padding: 16px 12px;
    }
    
    .course-image {
        height: 160px;
    }
    
    .category-card h3 {
        font-size: 16px;
    }
    
    .category-card p {
        font-size: 13px;
    }
    
    /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ */
    .mobile-search-toggle,
    .profile-icon,
    .bookmark-button {
        min-width: 40px;
        min-height: 40px;
        padding: 8px;
    }
}

/* –ë–æ–ª—å—à–∏–µ —ç–∫—Ä–∞–Ω—ã (iPhone Pro Max, –±–æ–ª—å—à–∏–µ Android) */
@media (max-width: 768px) and (min-width: 415px) {
    .category-card {
        padding: 24px 20px;
    }
    
    .course-image {
        height: 220px;
    }
    
    .category-card h3 {
        font-size: 22px;
    }
    
    .category-card p {
        font-size: 16px;
    }
}

/* Landscape –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (max-width: 768px) and (orientation: landscape) {
    .hero {
        padding: 16px 0;
    }
    
    .hero h2 {
        font-size: 24px;
        margin-bottom: 8px;
    }
    
    .categories-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
    }
    
    .course-image {
        height: 140px;
    }
}

/* –û—á–µ–Ω—å –Ω–∏–∑–∫–∏–µ landscape —ç–∫—Ä–∞–Ω—ã */
@media (max-width: 768px) and (orientation: landscape) and (max-height: 400px) {
    .header-content {
        padding: 4px 0;
        min-height: 48px;
    }
    
    .hero {
        padding: 12px 0;
    }
    
    .hero h2 {
        font-size: 20px;
        margin-bottom: 4px;
    }
    
    .hero p {
        font-size: 13px;
    }
    
    .search-bar.mobile-active {
        top: 48px;
        padding: 8px 12px;
    }
}

/* Accessibility –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã */
@media (prefers-reduced-motion: reduce) {
    .category-card,
    .course-card,
    .mobile-search-toggle,
    .profile-icon {
        transition: none !important;
        animation: none !important;
    }
}

@media (prefers-contrast: high) {
    .category-card,
    .course-card {
        border: 2px solid var(--text-color);
        background: var(--primary-color);
    }
    
    .mobile-search-toggle,
    .profile-icon,
    .bookmark-button {
        border: 2px solid var(--accent-color);
    }
}

/* Dark mode –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ */
@media (prefers-color-scheme: dark) {
    :root {
        --card-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
    }
    
    .category-card,
    .course-card {
        box-shadow: var(--card-shadow);
    }
}

/* –ü—Ä–∏–Ω—Ç–µ—Ä —Å—Ç–∏–ª–∏ (–µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º) */
@media print {
    .header-content,
    .mobile-search-toggle,
    .search-bar,
    .icons {
        display: none !important;
    }
    
    .category-card,
    .course-card {
        break-inside: avoid;
        page-break-inside: avoid;
    }
}

/* PWA —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ */
@media (display-mode: standalone) {
    /* –£–±–∏—Ä–∞–µ–º top padding –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ standalone —Ä–µ–∂–∏–º–µ */
    body {
        padding-top: 0;
    }
    
    /* –î–æ–±–∞–≤–ª—è–µ–º –±–æ–ª—å—à–µ –æ—Ç—Å—Ç—É–ø–æ–≤ –¥–ª—è safe area */
    .header-content {
        padding-top: calc(16px + var(--safe-area-top));
        padding-bottom: 16px;
    }
}

/* Fold —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (Galaxy Fold, Surface Duo) */
@media (max-width: 768px) and (min-aspect-ratio: 13/9) {
    .categories-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .header-content {
        padding: 12px 20px;
    }
}

/* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è iOS */
@supports (-webkit-touch-callout: none) {
    /* iOS specific styles */
    .search-bar input {
        -webkit-appearance: none;
        border-radius: 0;
    }
    
    .mobile-search-toggle,
    .profile-icon,
    .bookmark-button {
        -webkit-touch-callout: none;
    }
    
    /* –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–±–ª–µ–º—ã —Å viewport –Ω–∞ iOS */
    body {
        height: calc(100vh - var(--safe-area-top) - var(--safe-area-bottom));
        height: calc(100 * var(--mobile-vh) - var(--safe-area-top) - var(--safe-area-bottom));
    }
}

/* Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ */
@media (max-width: 768px) {
    /* –ò—Å–ø–æ–ª—å–∑—É–µ–º will-change –¥–ª—è –∞–Ω–∏–º–∏—Ä—É–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
    .category-card,
    .course-card,
    .mobile-search-toggle {
        will-change: transform;
    }
    
    /* –£–±–∏—Ä–∞–µ–º will-change –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ JavaScript */
    .category-card.animation-complete,
    .course-card.animation-complete {
        will-change: auto;
    }
}

/* Styles for reduced data mode */
@media (prefers-reduced-data: reduce) {
    .course-image img,
    .category-card img {
        background-image: none;
        background: var(--card-bg);
    }
    
    .course-image::after {
        content: 'üìö';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 3rem;
        opacity: 0.5;
    }
} 